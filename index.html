<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>City Wide - Post-Construction Cleaning Calculator</title>
    <style>
        :root {
            --primary-blue: #1E3A8A;
            --secondary-blue: #3B82F6;
            --accent-red: #DC2626;
            --dark-gray: #374151;
            --light-gray: #F3F4F6;
            --success-green: #059669;
            --white: #FFFFFF;
            --warning-yellow: #F59E0B;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            color: var(--dark-gray);
            line-height: 1.6;
            background: var(--light-gray);
        }

        header {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--secondary-blue) 100%);
            color: var(--white);
            padding: 2rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .card {
            background: var(--white);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .card h2 {
            color: var(--primary-blue);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--light-gray);
        }

        .card h3 {
            color: var(--dark-gray);
            margin: 1rem 0;
            font-size: 1.1rem;
        }

        /* Phase Selection Section */
        .phase-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .phase-card {
            border: 2px solid var(--light-gray);
            border-radius: 8px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .phase-card.selected {
            border-color: var(--secondary-blue);
            background: rgba(59, 130, 246, 0.05);
        }

        .phase-card h4 {
            color: var(--primary-blue);
            margin-bottom: 0.5rem;
        }

        .phase-checkbox {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 24px;
            height: 24px;
        }

        /* Cost Provider Toggle Section */
        .cost-provider-section {
            background: var(--light-gray);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }

        .toggle-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .toggle-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .toggle-group label {
            font-weight: 600;
            color: var(--dark-gray);
        }

        .toggle-buttons {
            display: flex;
            border-radius: 4px;
            overflow: hidden;
            border: 1px solid #D1D5DB;
        }

        .toggle-buttons button {
            flex: 1;
            padding: 0.5rem;
            border: none;
            background: var(--white);
            color: var(--dark-gray);
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .vendor-btn.active {
            background: var(--accent-red);
            color: var(--white);
        }

        .inhouse-btn.active {
            background: var(--success-green);
            color: var(--white);
        }

        /* Input Sections */
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .input-group label {
            font-weight: 600;
            color: var(--dark-gray);
            font-size: 0.9rem;
        }

        .input-group input,
        .input-group select {
            padding: 0.75rem;
            border: 1px solid #D1D5DB;
            border-radius: 4px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: var(--secondary-blue);
        }

        /* IC Rate Breakdown */
        .ic-breakdown {
            background: var(--light-gray);
            border: 2px solid var(--secondary-blue);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .breakdown-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .breakdown-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem;
            background: var(--white);
            border-radius: 4px;
        }

        .breakdown-item .label {
            font-weight: 500;
            color: var(--dark-gray);
        }

        .breakdown-item .value {
            font-weight: 600;
            color: var(--primary-blue);
        }

        /* Results Section */
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }

        .result-card {
            background: var(--white);
            border: 2px solid var(--light-gray);
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            transition: transform 0.3s;
        }

        .result-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .result-card.highlight {
            border-color: var(--accent-red);
            background: rgba(220, 38, 38, 0.05);
        }

        .result-card h4 {
            color: var(--dark-gray);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .result-card .value {
            color: var(--primary-blue);
            font-size: 1.8rem;
            font-weight: 700;
            margin: 0.5rem 0;
        }

        .result-card.highlight .value {
            color: var(--accent-red);
        }

        .result-card .subtitle {
            color: #6B7280;
            font-size: 0.85rem;
        }

        /* Phase Summary Cards */
        .phase-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .phase-summary-card {
            background: linear-gradient(135deg, var(--light-gray) 0%, var(--white) 100%);
            border-left: 4px solid var(--secondary-blue);
            padding: 1rem;
            border-radius: 4px;
        }

        .phase-summary-card h4 {
            color: var(--primary-blue);
            margin-bottom: 0.75rem;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 0.25rem 0;
            font-size: 0.95rem;
        }

        /* Export Buttons */
        .export-section {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 2rem;
            justify-content: center;
        }

        .export-btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 4px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--white);
            min-width: 200px;
        }

        .export-btn.vendor {
            background: var(--secondary-blue);
        }

        .export-btn.fsm {
            background: var(--success-green);
        }

        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8rem;
            }

            .container {
                padding: 1rem;
            }

            .input-grid,
            .results-grid,
            .phase-selector {
                grid-template-columns: 1fr;
            }

            .export-section {
                flex-direction: column;
            }

            .export-btn {
                width: 100%;
            }
        }

        /* Utility Classes */
        .text-small { font-size: 0.85rem; }
    </style>
</head>
<body>
    <header>
        <h1>City Wide Post-Construction Cleaning Calculator</h1>
        <p>Comprehensive Pricing for Commercial Properties - All Three Phases</p>
    </header>

    <div class="container">
        <!-- Phase Selection Section -->
        <div class="card">
            <h2>Phase Selection & Project Details</h2>
            
            <div class="phase-selector">
                <div class="phase-card selected" onclick="togglePhase('rough')">
                    <input type="checkbox" class="phase-checkbox" id="phaseRough" checked>
                    <h4>Phase 1: Rough Clean</h4>
                    <p class="text-small">Initial debris removal, sweeping, dust control, and basic preparation</p>
                    <p class="text-small"><strong>Timeline:</strong> 40-50% of project</p>
                    <p class="text-small"><strong>Rate:</strong> 200-300 sq ft/hour</p>
                </div>
                
                <div class="phase-card selected" onclick="togglePhase('final')">
                    <input type="checkbox" class="phase-checkbox" id="phaseFinal" checked>
                    <h4>Phase 2: Final Clean</h4>
                    <p class="text-small">Detailed cleaning, dusting, mopping, fixtures, HVAC cleaning</p>
                    <p class="text-small"><strong>Timeline:</strong> 40-45% of project</p>
                    <p class="text-small"><strong>Rate:</strong> 150-250 sq ft/hour</p>
                </div>
                
                <div class="phase-card selected" onclick="togglePhase('touchup')">
                    <input type="checkbox" class="phase-checkbox" id="phaseTouchup" checked>
                    <h4>Phase 3: Touch-Up</h4>
                    <p class="text-small">Final details, spot cleaning, inspection prep</p>
                    <p class="text-small"><strong>Timeline:</strong> 10-15% of project</p>
                    <p class="text-small"><strong>Rate:</strong> 300-400 sq ft/hour</p>
                </div>
            </div>

            <div class="input-grid">
                <div class="input-group">
                    <label for="squareFootage">Total Square Footage</label>
                    <input type="number" id="squareFootage" value="25000" min="1000" step="500" onchange="updateCalculations()">
                </div>
                
                <div class="input-group">
                    <label for="buildingType">Building Type</label>
                    <select id="buildingType" onchange="updateCalculations()">
                        <option value="office">Standard Office Building</option>
                        <option value="medical">Medical/Healthcare Facility</option>
                        <option value="retail">Retail/Commercial Space</option>
                        <option value="industrial">Industrial/Warehouse</option>
                        <option value="education">Educational Facility</option>
                        <option value="hospitality">Hotel/Hospitality</option>
                        <option value="datacenter">Data Center/Tech Facility</option>
                        <option value="highend">Class A/Luxury Office</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="buildingCondition">Post-Construction Condition</label>
                    <select id="buildingCondition" onchange="updateCalculations()">
                        <option value="light">Light - Minimal dust/debris</option>
                        <option value="moderate" selected>Moderate - Standard construction mess</option>
                        <option value="heavy">Heavy - Extensive debris/residue</option>
                        <option value="extreme">Extreme - Major renovation debris</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="buildingComplexity">Building Complexity</label>
                    <select id="buildingComplexity" onchange="updateCalculations()">
                        <option value="simple">Simple - Open floor plan, easy access</option>
                        <option value="moderate" selected>Moderate - Some obstacles, standard layout</option>
                        <option value="complex">Complex - Multiple rooms, difficult access</option>
                        <option value="verycomplex">Very Complex - High ceilings, specialized areas</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="floors">Number of Floors</label>
                    <input type="number" id="floors" value="1" min="1" max="100" onchange="updateCalculations()">
                </div>
                
                <div class="input-group">
                    <label for="timeOfService">Service Schedule</label>
                    <select id="timeOfService" onchange="updateCalculations()">
                        <option value="normal">Normal Hours (6am-6pm)</option>
                        <option value="evening">Evening (6pm-12am) +15%</option>
                        <option value="overnight">Overnight (12am-6am) +25%</option>
                        <option value="weekend">Weekend +20%</option>
                        <option value="emergency">Emergency/Rush +35%</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Cost Provider Toggle Section -->
        <div class="card">
            <h2>Cost Provider Selection</h2>
            <div class="cost-provider-section">
                <div class="toggle-grid">
                    <div class="toggle-group">
                        <label>Labor Provider</label>
                        <div class="toggle-buttons">
                            <button class="vendor-btn active" data-category="labor" onclick="toggleProvider('labor', 'vendor')">Vendor</button>
                            <button class="inhouse-btn" data-category="labor" onclick="toggleProvider('labor', 'inhouse')">In-House</button>
                        </div>
                    </div>
                    
                    <div class="toggle-group">
                        <label>Equipment Provider</label>
                        <div class="toggle-buttons">
                            <button class="vendor-btn active" data-category="equipment" onclick="toggleProvider('equipment', 'vendor')">Vendor</button>
                            <button class="inhouse-btn" data-category="equipment" onclick="toggleProvider('equipment', 'inhouse')">In-House</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Labor & Equipment Section -->
        <div class="card">
            <h2>Labor & Equipment Configuration</h2>
            
            <h3>Crew Configuration</h3>
            <div class="input-grid">
                <div class="input-group">
                    <label for="crewSize">Standard Crew Size</label>
                    <select id="crewSize" onchange="updateCalculations()">
                        <option value="2">2 Person Crew</option>
                        <option value="3">3 Person Crew</option>
                        <option value="4" selected>4 Person Crew</option>
                        <option value="6">6 Person Crew</option>
                        <option value="8">8 Person Crew</option>
                        <option value="10">10 Person Crew</option>
                        <option value="15">15 Person Crew</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="supervisors">Number of Supervisors</label>
                    <input type="number" id="supervisors" value="1" min="0" max="5" onchange="updateCalculations()">
                </div>
                
                <div class="input-group">
                    <label for="specialists">Specialist Workers</label>
                    <input type="number" id="specialists" value="0" min="0" max="5" onchange="updateCalculations()">
                </div>
            </div>

            <h3>Labor Rates</h3>
            <div class="input-grid">
                <div class="input-group">
                    <label for="laborRate">Base Labor Rate ($/hour)</label>
                    <input type="number" id="laborRate" value="18.00" min="15" max="35" step="0.50" onchange="updateCalculations()">
                </div>
                
                <div class="input-group">
                    <label for="supervisorRate">Supervisor Rate ($/hour)</label>
                    <input type="number" id="supervisorRate" value="23.00" min="20" max="40" step="0.50" onchange="updateCalculations()">
                </div>
                
                <div class="input-group">
                    <label for="specialistRate">Specialist Rate ($/hour)</label>
                    <input type="number" id="specialistRate" value="25.00" min="20" max="45" step="0.50" onchange="updateCalculations()">
                </div>
                
                <div class="input-group">
                    <label for="stateTax">State Income Tax (%)</label>
                    <input type="number" id="stateTax" value="0.00" min="0" max="15" step="0.1" onchange="updateCalculations()">
                </div>
            </div>

            <!-- IC Rate Breakdown -->
            <div class="ic-breakdown">
                <h3>Independent Contractor Rate Breakdown</h3>
                <div class="breakdown-grid">
                    <div class="breakdown-item">
                        <span class="label">Base Rate:</span>
                        <span class="value" id="breakdownBase">$18.00</span>
                    </div>
                    <div class="breakdown-item">
                        <span class="label">FICA (7.65%):</span>
                        <span class="value" id="breakdownFICA">$1.38</span>
                    </div>
                    <div class="breakdown-item">
                        <span class="label">FUTA (0.60%):</span>
                        <span class="value" id="breakdownFUTA">$0.11</span>
                    </div>
                    <div class="breakdown-item">
                        <span class="label">Work Comp (2.50%):</span>
                        <span class="value" id="breakdownWC">$0.45</span>
                    </div>
                    <div class="breakdown-item">
                        <span class="label">GL (0.50%):</span>
                        <span class="value" id="breakdownGL">$0.09</span>
                    </div>
                    <div class="breakdown-item">
                        <span class="label">State Tax:</span>
                        <span class="value" id="breakdownState">$0.00</span>
                    </div>
                    <div class="breakdown-item">
                        <span class="label">Supplies (10%):</span>
                        <span class="value" id="breakdownSupplies">$1.80</span>
                    </div>
                    <div class="breakdown-item">
                        <span class="label">Subtotal:</span>
                        <span class="value" id="breakdownSubtotal">$21.83</span>
                    </div>
                    <div class="breakdown-item">
                        <span class="label">IC Profit (10%):</span>
                        <span class="value" id="breakdownICProfit">$2.18</span>
                    </div>
                    <div class="breakdown-item">
                        <span class="label">IC Loaded Rate:</span>
                        <span class="value" id="breakdownLoaded">$24.01</span>
                    </div>
                </div>
            </div>

            <h3>Major Equipment Requirements</h3>
            <div class="input-grid">
                <div class="input-group">
                    <label for="floorScrubbers">Floor Scrubbers</label>
                    <select id="floorScrubbers" onchange="updateCalculations()">
                        <option value="0">None</option>
                        <option value="1" selected>1 Walk-Behind</option>
                        <option value="2">2 Walk-Behind</option>
                        <option value="1r">1 Ride-On</option>
                        <option value="2r">2 Ride-On</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="wetVacs">Wet/Dry Vacuums</label>
                    <input type="number" id="wetVacs" value="2" min="0" max="10" onchange="updateCalculations()">
                </div>
                
                <div class="input-group">
                    <label for="lifts">Lifts Required</label>
                    <select id="lifts" onchange="updateCalculations()">
                        <option value="none">None</option>
                        <option value="scissor">Scissor Lift</option>
                        <option value="boom">Boom Lift</option>
                        <option value="both">Both Types</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="dumpster">Dumpster Rental</label>
                    <select id="dumpster" onchange="updateCalculations()">
                        <option value="no">No - Client Provided</option>
                        <option value="small">10-15 Yard</option>
                        <option value="medium">20-30 Yard</option>
                        <option value="large">40 Yard</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- City Wide Margin Section -->
        <div class="card">
            <h2>City Wide Pricing Configuration</h2>
            
            <div class="input-grid">
                <div class="input-group">
                    <label for="cityWideMargin">City Wide Margin (%)</label>
                    <input type="number" id="cityWideMargin" value="35" min="20" max="60" step="1" onchange="updateCalculations()">
                </div>
                
                <div class="input-group">
                    <label for="icProfit">IC Profit & Overhead (%)</label>
                    <input type="number" id="icProfit" value="10" min="5" max="25" step="1" onchange="updateCalculations()">
                </div>
                
                <div class="input-group">
                    <label for="region">Regional Adjustment</label>
                    <select id="region" onchange="updateCalculations()">
                        <option value="rural">Rural (-25%)</option>
                        <option value="suburban">Suburban (-10%)</option>
                        <option value="standard" selected>Standard Market</option>
                        <option value="urban">Urban (+15%)</option>
                        <option value="major">Major Metro (+25%)</option>
                        <option value="nyc">NYC/SF Market (+35%)</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="competitionLevel">Competition Level</label>
                    <select id="competitionLevel" onchange="updateCalculations()">
                        <option value="low">Low - Premium pricing</option>
                        <option value="moderate" selected>Moderate - Market rates</option>
                        <option value="high">High - Competitive pricing</option>
                        <option value="aggressive">Aggressive - Win the bid</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Phase-by-Phase Results -->
        <div class="card">
            <h2>Phase-by-Phase Breakdown</h2>
            
            <div class="phase-summary">
                <div class="phase-summary-card">
                    <h4>Phase 1: Rough Clean</h4>
                    <div class="summary-row">
                        <span>Labor Hours:</span>
                        <span id="roughHours">125</span>
                    </div>
                    <div class="summary-row">
                        <span>Production Rate:</span>
                        <span id="roughRate">250 sq ft/hr</span>
                    </div>
                    <div class="summary-row">
                        <span>Labor Cost:</span>
                        <span id="roughLabor">$2,500</span>
                    </div>
                    <div class="summary-row">
                        <span>Equipment Cost:</span>
                        <span id="roughEquipment">$500</span>
                    </div>
                    <div class="summary-row">
                        <span>Materials Cost:</span>
                        <span id="roughMaterials">$250</span>
                    </div>
                    <div class="summary-row">
                        <span><strong>Phase Total:</strong></span>
                        <span><strong id="roughTotal">$3,250</strong></span>
                    </div>
                </div>
                
                <div class="phase-summary-card">
                    <h4>Phase 2: Final Clean</h4>
                    <div class="summary-row">
                        <span>Labor Hours:</span>
                        <span id="finalHours">150</span>
                    </div>
                    <div class="summary-row">
                        <span>Production Rate:</span>
                        <span id="finalRate">200 sq ft/hr</span>
                    </div>
                    <div class="summary-row">
                        <span>Labor Cost:</span>
                        <span id="finalLabor">$3,000</span>
                    </div>
                    <div class="summary-row">
                        <span>Equipment Cost:</span>
                        <span id="finalEquipment">$750</span>
                    </div>
                    <div class="summary-row">
                        <span>Materials Cost:</span>
                        <span id="finalMaterials">$1,250</span>
                    </div>
                    <div class="summary-row">
                        <span><strong>Phase Total:</strong></span>
                        <span><strong id="finalTotal">$5,000</strong></span>
                    </div>
                </div>
                
                <div class="phase-summary-card">
                    <h4>Phase 3: Touch-Up</h4>
                    <div class="summary-row">
                        <span>Labor Hours:</span>
                        <span id="touchupHours">75</span>
                    </div>
                    <div class="summary-row">
                        <span>Production Rate:</span>
                        <span id="touchupRate">350 sq ft/hr</span>
                    </div>
                    <div class="summary-row">
                        <span>Labor Cost:</span>
                        <span id="touchupLabor">$1,500</span>
                    </div>
                    <div class="summary-row">
                        <span>Equipment Cost:</span>
                        <span id="touchupEquipment">$250</span>
                    </div>
                    <div class="summary-row">
                        <span>Materials Cost:</span>
                        <span id="touchupMaterials">$150</span>
                    </div>
                    <div class="summary-row">
                        <span><strong>Phase Total:</strong></span>
                        <span><strong id="touchupTotal">$1,900</strong></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Overall Results -->
        <div class="card">
            <h2>Total Project Pricing</h2>
            
            <div class="results-grid">
                <div class="result-card">
                    <h4>Total Labor Hours</h4>
                    <div class="value" id="totalHours">350</div>
                    <div class="subtitle">All phases combined</div>
                </div>
                
                <div class="result-card">
                    <h4>Total Days</h4>
                    <div class="value" id="totalDays">11</div>
                    <div class="subtitle">With crew</div>
                </div>
                
                <div class="result-card">
                    <h4>Labor Cost</h4>
                    <div class="value" id="totalLabor">$7,000</div>
                    <div class="subtitle">All crew members</div>
                </div>
                
                <div class="result-card">
                    <h4>Equipment Cost</h4>
                    <div class="value" id="totalEquipment">$1,500</div>
                    <div class="subtitle">Rental & depreciation</div>
                </div>
                
                <div class="result-card">
                    <h4>Materials Cost</h4>
                    <div class="value" id="totalMaterials">$1,650</div>
                    <div class="subtitle">Chemicals & supplies</div>
                </div>
                
                <div class="result-card">
                    <h4>Total Cost to CW</h4>
                    <div class="value" id="totalCostToCW">$10,150</div>
                    <div class="subtitle">Before margin</div>
                </div>
                
                <div class="result-card">
                    <h4>Price Per Sq Ft</h4>
                    <div class="value" id="pricePerSqFt">$0.63</div>
                    <div class="subtitle">All phases</div>
                </div>
                
                <div class="result-card highlight">
                    <h4>Final Client Price</h4>
                    <div class="value" id="clientPrice">$15,615</div>
                    <div class="subtitle">With margin</div>
                </div>
                
                <div class="result-card highlight">
                    <h4>CW Gross Profit</h4>
                    <div class="value" id="grossProfit">$5,465</div>
                    <div class="subtitle">Profit amount</div>
                </div>
                
                <div class="result-card">
                    <h4>Vendor Payment</h4>
                    <div class="value" id="vendorPayment">$11,165</div>
                    <div class="subtitle">With IC profit</div>
                </div>
            </div>
        </div>

        <!-- Export Options - Simplified -->
        <div class="card">
            <h2>Export Options</h2>
            <div class="export-section">
                <button class="export-btn vendor" onclick="exportVendorSpecs()">
                    Export Vendor Specifications
                </button>
                <button class="export-btn fsm" onclick="exportFSMSummary()">
                    Export FSM Summary
                </button>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let providers = {
            labor: 'vendor',
            equipment: 'vendor'
        };

        let phases = {
            rough: true,
            final: true,
            touchup: true
        };

        let calculationResults = {};

        // Production rates
        const productionRates = {
            rough: {
                office: { light: 300, moderate: 250, heavy: 200, extreme: 150 },
                medical: { light: 250, moderate: 200, heavy: 150, extreme: 125 },
                retail: { light: 325, moderate: 275, heavy: 225, extreme: 175 },
                industrial: { light: 350, moderate: 300, heavy: 250, extreme: 200 },
                education: { light: 275, moderate: 225, heavy: 175, extreme: 150 },
                hospitality: { light: 250, moderate: 200, heavy: 150, extreme: 125 },
                datacenter: { light: 200, moderate: 150, heavy: 125, extreme: 100 },
                highend: { light: 225, moderate: 175, heavy: 150, extreme: 125 }
            },
            final: {
                office: { light: 250, moderate: 200, heavy: 150, extreme: 125 },
                medical: { light: 200, moderate: 150, heavy: 125, extreme: 100 },
                retail: { light: 275, moderate: 225, heavy: 175, extreme: 150 },
                industrial: { light: 300, moderate: 250, heavy: 200, extreme: 175 },
                education: { light: 225, moderate: 175, heavy: 150, extreme: 125 },
                hospitality: { light: 200, moderate: 150, heavy: 125, extreme: 100 },
                datacenter: { light: 150, moderate: 125, heavy: 100, extreme: 75 },
                highend: { light: 175, moderate: 150, heavy: 125, extreme: 100 }
            },
            touchup: {
                office: { light: 450, moderate: 375, heavy: 300, extreme: 250 },
                medical: { light: 400, moderate: 325, heavy: 250, extreme: 200 },
                retail: { light: 475, moderate: 400, heavy: 325, extreme: 275 },
                industrial: { light: 500, moderate: 425, heavy: 350, extreme: 300 },
                education: { light: 425, moderate: 350, heavy: 275, extreme: 225 },
                hospitality: { light: 400, moderate: 325, heavy: 250, extreme: 200 },
                datacenter: { light: 350, moderate: 275, heavy: 225, extreme: 175 },
                highend: { light: 375, moderate: 300, heavy: 250, extreme: 200 }
            }
        };

        // Initialize
        window.addEventListener('DOMContentLoaded', function() {
            updateCalculations();
        });

        function togglePhase(phase) {
            phases[phase] = !phases[phase];
            const checkbox = document.getElementById(`phase${phase.charAt(0).toUpperCase() + phase.slice(1)}`);
            checkbox.checked = phases[phase];
            
            const cards = document.querySelectorAll('.phase-card');
            cards.forEach((card, index) => {
                const phaseNames = ['rough', 'final', 'touchup'];
                if (phaseNames[index] === phase) {
                    if (phases[phase]) {
                        card.classList.add('selected');
                    } else {
                        card.classList.remove('selected');
                    }
                }
            });
            
            updateCalculations();
        }

        function toggleProvider(category, type) {
            providers[category] = type;
            
            const buttons = document.querySelectorAll(`[data-category="${category}"]`);
            buttons.forEach(btn => {
                if (btn.classList.contains(`${type}-btn`)) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
            
            updateCalculations();
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        function formatCurrencyDetailed(amount) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(amount);
        }

        function updateICBreakdown() {
            const baseRate = parseFloat(document.getElementById('laborRate').value) || 18;
            const stateTax = parseFloat(document.getElementById('stateTax').value) || 0;
            const icProfit = parseFloat(document.getElementById('icProfit').value) || 10;
            
            const fica = baseRate * 0.0765;
            const futa = baseRate * 0.006;
            const workComp = baseRate * 0.025;
            const gl = baseRate * 0.005;
            const stateTaxAmount = baseRate * (stateTax / 100);
            const suppliesEquipment = baseRate * 0.10;
            
            const subtotal = baseRate + fica + futa + workComp + gl + stateTaxAmount + suppliesEquipment;
            const icProfitAmount = subtotal * (icProfit / 100);
            const loadedRate = subtotal + icProfitAmount;
            
            document.getElementById('breakdownBase').textContent = formatCurrencyDetailed(baseRate);
            document.getElementById('breakdownFICA').textContent = formatCurrencyDetailed(fica);
            document.getElementById('breakdownFUTA').textContent = formatCurrencyDetailed(futa);
            document.getElementById('breakdownWC').textContent = formatCurrencyDetailed(workComp);
            document.getElementById('breakdownGL').textContent = formatCurrencyDetailed(gl);
            document.getElementById('breakdownState').textContent = formatCurrencyDetailed(stateTaxAmount);
            document.getElementById('breakdownSupplies').textContent = formatCurrencyDetailed(suppliesEquipment);
            document.getElementById('breakdownSubtotal').textContent = formatCurrencyDetailed(subtotal);
            document.getElementById('breakdownICProfit').textContent = formatCurrencyDetailed(icProfitAmount);
            document.getElementById('breakdownLoaded').textContent = formatCurrencyDetailed(loadedRate);
            
            return { subtotal, loadedRate };
        }

        function calculatePhaseHours(phase, sqft, buildingType, condition, complexity) {
            const baseRate = productionRates[phase][buildingType][condition];
            
            let complexityMultiplier = 1;
            switch(complexity) {
                case 'simple': complexityMultiplier = 1.1; break;
                case 'moderate': complexityMultiplier = 1.0; break;
                case 'complex': complexityMultiplier = 0.9; break;
                case 'verycomplex': complexityMultiplier = 0.8; break;
            }
            
            const floors = parseInt(document.getElementById('floors').value) || 1;
            const floorMultiplier = 1 - ((floors - 1) * 0.05);
            
            const adjustedRate = baseRate * complexityMultiplier * Math.max(floorMultiplier, 0.7);
            const hours = sqft / adjustedRate;
            
            return { hours, rate: adjustedRate };
        }

        function calculateEquipmentCost(phase, days) {
            const floorScrubbers = document.getElementById('floorScrubbers').value;
            const wetVacs = parseInt(document.getElementById('wetVacs').value) || 0;
            const lifts = document.getElementById('lifts').value;
            const dumpster = document.getElementById('dumpster').value;
            
            let dailyCost = 0;
            
            if (floorScrubbers === '1') dailyCost += 150;
            else if (floorScrubbers === '2') dailyCost += 300;
            else if (floorScrubbers === '1r') dailyCost += 250;
            else if (floorScrubbers === '2r') dailyCost += 500;
            
            dailyCost += wetVacs * 50;
            
            if (lifts === 'scissor') dailyCost += 250;
            else if (lifts === 'boom') dailyCost += 500;
            else if (lifts === 'both') dailyCost += 750;
            
            let phaseMultiplier = 1;
            if (phase === 'rough') phaseMultiplier = 0.8;
            else if (phase === 'final') phaseMultiplier = 1.0;
            else if (phase === 'touchup') phaseMultiplier = 0.3;
            
            let totalEquipmentCost = dailyCost * days * phaseMultiplier;
            
            if (phase === 'rough' && dumpster !== 'no') {
                if (dumpster === 'small') totalEquipmentCost += 400;
                else if (dumpster === 'medium') totalEquipmentCost += 600;
                else if (dumpster === 'large') totalEquipmentCost += 800;
            }
            
            return totalEquipmentCost;
        }

        function updateCalculations() {
            updateICBreakdown();
            
            const sqft = parseFloat(document.getElementById('squareFootage').value) || 25000;
            const buildingType = document.getElementById('buildingType').value;
            const condition = document.getElementById('buildingCondition').value;
            const complexity = document.getElementById('buildingComplexity').value;
            const crewSize = parseInt(document.getElementById('crewSize').value) || 4;
            const supervisors = parseInt(document.getElementById('supervisors').value) || 1;
            const specialists = parseInt(document.getElementById('specialists').value) || 0;
            const timeOfService = document.getElementById('timeOfService').value;
            const region = document.getElementById('region').value;
            const competitionLevel = document.getElementById('competitionLevel').value;
            const cityWideMargin = parseFloat(document.getElementById('cityWideMargin').value) || 35;
            
            const laborRate = parseFloat(document.getElementById('laborRate').value) || 18;
            const supervisorRate = parseFloat(document.getElementById('supervisorRate').value) || 23;
            const specialistRate = parseFloat(document.getElementById('specialistRate').value) || 25;
            
            const { loadedRate } = updateICBreakdown();
            const supervisorLoaded = supervisorRate * 1.25;
            const specialistLoaded = specialistRate * 1.3;
            
            let timeMultiplier = 1;
            switch(timeOfService) {
                case 'evening': timeMultiplier = 1.15; break;
                case 'overnight': timeMultiplier = 1.25; break;
                case 'weekend': timeMultiplier = 1.20; break;
                case 'emergency': timeMultiplier = 1.35; break;
            }
            
            let regionalMultiplier = 1;
            switch(region) {
                case 'rural': regionalMultiplier = 0.75; break;
                case 'suburban': regionalMultiplier = 0.90; break;
                case 'urban': regionalMultiplier = 1.15; break;
                case 'major': regionalMultiplier = 1.25; break;
                case 'nyc': regionalMultiplier = 1.35; break;
            }
            
            let competitionAdjustment = 1;
            switch(competitionLevel) {
                case 'low': competitionAdjustment = 1.10; break;
                case 'high': competitionAdjustment = 0.95; break;
                case 'aggressive': competitionAdjustment = 0.90; break;
            }
            
            let totalHours = 0;
            let totalLaborCost = 0;
            let totalBaseLaborCost = 0;
            let totalEquipmentCost = 0;
            
            // Store phase details for export
            let phaseDetails = {};
            
            // Phase calculations
            ['rough', 'final', 'touchup'].forEach(phase => {
                if (phases[phase]) {
                    const phaseCalc = calculatePhaseHours(phase, sqft, buildingType, condition, complexity);
                    const phaseDays = Math.ceil(phaseCalc.hours / (crewSize * 8));
                    
                    const basePhaseLabor = phaseCalc.hours * laborRate;
                    const phaseMaterials = basePhaseLabor * 0.10;
                    totalBaseLaborCost += basePhaseLabor;
                    
                    const regularWorkers = Math.max(crewSize - supervisors - specialists, 0);
                    const averageRate = (
                        (regularWorkers * loadedRate) +
                        (supervisors * supervisorLoaded) +
                        (specialists * specialistLoaded)
                    ) / crewSize;
                    
                    const phaseLaborCost = phaseCalc.hours * averageRate * timeMultiplier;
                    const phaseEquipment = calculateEquipmentCost(phase, phaseDays);
                    
                    phaseDetails[phase] = {
                        hours: Math.round(phaseCalc.hours),
                        rate: Math.round(phaseCalc.rate),
                        labor: phaseLaborCost,
                        equipment: phaseEquipment,
                        materials: phaseMaterials,
                        days: phaseDays
                    };
                    
                    // Update display
                    document.getElementById(`${phase}Hours`).textContent = Math.round(phaseCalc.hours);
                    document.getElementById(`${phase}Rate`).textContent = Math.round(phaseCalc.rate) + ' sq ft/hr';
                    document.getElementById(`${phase}Labor`).textContent = formatCurrency(phaseLaborCost);
                    document.getElementById(`${phase}Equipment`).textContent = formatCurrency(phaseEquipment);
                    document.getElementById(`${phase}Materials`).textContent = formatCurrency(phaseMaterials);
                    document.getElementById(`${phase}Total`).textContent = formatCurrency(phaseLaborCost + phaseEquipment);
                    
                    totalHours += phaseCalc.hours;
                    totalLaborCost += phaseLaborCost;
                    totalEquipmentCost += phaseEquipment;
                } else {
                    document.getElementById(`${phase}Hours`).textContent = '0';
                    document.getElementById(`${phase}Rate`).textContent = 'N/A';
                    document.getElementById(`${phase}Labor`).textContent = '$0';
                    document.getElementById(`${phase}Equipment`).textContent = '$0';
                    document.getElementById(`${phase}Materials`).textContent = '$0';
                    document.getElementById(`${phase}Total`).textContent = '$0';
                }
            });
            
            const totalMaterialsCost = totalBaseLaborCost * 0.10;
            
            if (providers.labor === 'vendor') {
                totalLaborCost *= 1.10;
            }
            if (providers.equipment === 'vendor') {
                totalEquipmentCost *= 1.10;
            }
            
            totalLaborCost *= regionalMultiplier * competitionAdjustment;
            totalEquipmentCost *= regionalMultiplier * competitionAdjustment;
            
            const totalCostToCW = totalLaborCost + totalEquipmentCost;
            const clientPrice = totalCostToCW / (1 - cityWideMargin / 100);
            const grossProfit = clientPrice - totalCostToCW;
            const vendorPayment = totalCostToCW;
            const totalDays = Math.ceil(totalHours / (crewSize * 8));
            const pricePerSqFt = clientPrice / sqft;
            
            document.getElementById('totalHours').textContent = Math.round(totalHours);
            document.getElementById('totalDays').textContent = totalDays;
            document.getElementById('totalLabor').textContent = formatCurrency(totalLaborCost);
            document.getElementById('totalEquipment').textContent = formatCurrency(totalEquipmentCost);
            document.getElementById('totalMaterials').textContent = formatCurrency(totalMaterialsCost);
            document.getElementById('totalCostToCW').textContent = formatCurrency(totalCostToCW);
            document.getElementById('pricePerSqFt').textContent = formatCurrencyDetailed(pricePerSqFt);
            document.getElementById('clientPrice').textContent = formatCurrency(clientPrice);
            document.getElementById('grossProfit').textContent = formatCurrency(grossProfit);
            document.getElementById('vendorPayment').textContent = formatCurrency(vendorPayment);
            
            // Store all results
            calculationResults = {
                sqft,
                buildingType,
                condition,
                complexity,
                crewSize,
                supervisors,
                specialists,
                totalHours: Math.round(totalHours),
                totalDays,
                totalLaborCost,
                totalEquipmentCost,
                totalMaterialsCost,
                totalCostToCW,
                clientPrice,
                grossProfit,
                vendorPayment,
                pricePerSqFt,
                cityWideMargin,
                phases,
                providers,
                phaseDetails,
                laborRate,
                supervisorRate,
                specialistRate,
                loadedRate,
                timeOfService,
                region,
                competitionLevel,
                floors: parseInt(document.getElementById('floors').value),
                icProfit: parseFloat(document.getElementById('icProfit').value),
                stateTax: parseFloat(document.getElementById('stateTax').value)
            };
        }

        // Simple export functions
        function exportVendorSpecs() {
            let content = 'VENDOR SPECIFICATIONS - POST-CONSTRUCTION CLEANING\n';
            content += '='.repeat(50) + '\n\n';
            content += `Generated: ${new Date().toLocaleDateString()}\n\n`;
            
            content += 'PROJECT OVERVIEW\n';
            content += '-'.repeat(30) + '\n';
            content += `Square Footage: ${calculationResults.sqft.toLocaleString()} sq ft\n`;
            content += `Building Type: ${document.getElementById('buildingType').selectedOptions[0].text}\n`;
            content += `Condition: ${document.getElementById('buildingCondition').selectedOptions[0].text}\n`;
            content += `Complexity: ${document.getElementById('buildingComplexity').selectedOptions[0].text}\n`;
            content += `Number of Floors: ${calculationResults.floors}\n\n`;
            
            content += 'PHASES INCLUDED\n';
            content += '-'.repeat(30) + '\n';
            if (phases.rough) content += '- Phase 1: Rough Clean\n';
            if (phases.final) content += '- Phase 2: Final Clean\n';
            if (phases.touchup) content += '- Phase 3: Touch-Up\n';
            content += '\n';
            
            content += 'LABOR REQUIREMENTS\n';
            content += '-'.repeat(30) + '\n';
            content += `Total Hours: ${calculationResults.totalHours} hours\n`;
            content += `Crew Size: ${calculationResults.crewSize} workers\n`;
            content += `Duration: ${calculationResults.totalDays} days\n`;
            content += `Base Rate: $${calculationResults.laborRate}/hour\n\n`;
            
            content += 'EQUIPMENT NEEDED\n';
            content += '-'.repeat(30) + '\n';
            content += `Floor Scrubbers: ${document.getElementById('floorScrubbers').selectedOptions[0].text}\n`;
            content += `Wet/Dry Vacuums: ${document.getElementById('wetVacs').value} units\n`;
            content += `Lifts: ${document.getElementById('lifts').selectedOptions[0].text}\n`;
            content += `Dumpster: ${document.getElementById('dumpster').selectedOptions[0].text}\n\n`;
            
            content += 'MATERIALS REQUIRED\n';
            content += '-'.repeat(30) + '\n';
            content += `All-Purpose Cleaner: ${Math.ceil(calculationResults.sqft / 5000)} gallons\n`;
            content += `Glass Cleaner: ${Math.ceil(calculationResults.sqft * 0.1 / 1000)} gallons\n`;
            content += `Disinfectant: ${Math.ceil(calculationResults.sqft / 8000)} gallons\n`;
            content += `Microfiber Cloths: ${Math.ceil(calculationResults.totalHours / 4)} dozen\n`;
            content += `Trash Bags: ${Math.ceil(calculationResults.sqft / 1000)} bags\n`;
            
            // Download as text file
            const blob = new Blob([content], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'vendor-specifications.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }
        
        function exportFSMSummary() {
            let content = 'FACILITY SOLUTIONS MANAGER - COMPLETE JOB SUMMARY\n';
            content += '='.repeat(50) + '\n\n';
            content += `Service: Post-Construction Cleaning\n`;
            content += `Location: ${calculationResults.sqft.toLocaleString()} sq ft ${document.getElementById('buildingType').selectedOptions[0].text}\n`;
            content += `Generated: ${new Date().toLocaleString()}\n\n`;
            
            content += 'JOB OVERVIEW\n';
            content += '-'.repeat(30) + '\n';
            content += `Square Footage: ${calculationResults.sqft.toLocaleString()} sq ft\n`;
            content += `Building Type: ${document.getElementById('buildingType').selectedOptions[0].text}\n`;
            content += `Condition: ${document.getElementById('buildingCondition').selectedOptions[0].text}\n`;
            content += `Complexity: ${document.getElementById('buildingComplexity').selectedOptions[0].text}\n`;
            content += `Floors: ${calculationResults.floors}\n`;
            content += `Service Schedule: ${document.getElementById('timeOfService').selectedOptions[0].text}\n`;
            content += `Total Hours: ${calculationResults.totalHours} hours\n`;
            content += `Crew Size: ${calculationResults.crewSize} workers\n`;
            content += `Duration: ${calculationResults.totalDays} days\n\n`;
            
            content += 'PRICING SUMMARY\n';
            content += '-'.repeat(30) + '\n';
            content += `Final Client Price: $${Math.round(calculationResults.clientPrice).toLocaleString()}\n`;
            content += `Vendor Payment: $${Math.round(calculationResults.vendorPayment).toLocaleString()}\n`;
            content += `City Wide Profit: $${Math.round(calculationResults.grossProfit).toLocaleString()}\n`;
            content += `City Wide Margin: ${calculationResults.cityWideMargin}%\n`;
            content += `Price Per Sq Ft: $${calculationResults.pricePerSqFt.toFixed(2)}\n\n`;
            
            content += 'COST BREAKDOWN\n';
            content += '-'.repeat(30) + '\n';
            content += `Labor Cost: $${Math.round(calculationResults.totalLaborCost).toLocaleString()}\n`;
            content += `Equipment Cost: $${Math.round(calculationResults.totalEquipmentCost).toLocaleString()}\n`;
            content += `Materials Cost: $${Math.round(calculationResults.totalMaterialsCost).toLocaleString()}\n`;
            content += `Total Cost to CW: $${Math.round(calculationResults.totalCostToCW).toLocaleString()}\n\n`;
            
            content += 'PROVIDER SELECTIONS\n';
            content += '-'.repeat(30) + '\n';
            content += `Labor: ${providers.labor === 'vendor' ? 'Vendor (includes IC profit)' : 'In-House'}\n`;
            content += `Equipment: ${providers.equipment === 'vendor' ? 'Vendor (includes IC profit)' : 'In-House'}\n\n`;
            
            content += 'LABOR RATES\n';
            content += '-'.repeat(30) + '\n';
            content += `Base Rate: $${calculationResults.laborRate.toFixed(2)}/hour\n`;
            content += `Supervisor Rate: $${calculationResults.supervisorRate.toFixed(2)}/hour\n`;
            content += `Specialist Rate: $${calculationResults.specialistRate.toFixed(2)}/hour\n`;
            content += `IC Loaded Rate: $${calculationResults.loadedRate.toFixed(2)}/hour\n`;
            content += `IC Profit: ${calculationResults.icProfit}%\n`;
            content += `State Tax: ${calculationResults.stateTax}%\n\n`;
            
            if (calculationResults.phaseDetails) {
                content += 'PHASE BREAKDOWN\n';
                content += '-'.repeat(30) + '\n';
                
                if (calculationResults.phaseDetails.rough && phases.rough) {
                    content += `Phase 1 - Rough Clean:\n`;
                    content += `  Hours: ${calculationResults.phaseDetails.rough.hours}\n`;
                    content += `  Days: ${calculationResults.phaseDetails.rough.days}\n`;
                    content += `  Labor: $${Math.round(calculationResults.phaseDetails.rough.labor).toLocaleString()}\n`;
                    content += `  Equipment: $${Math.round(calculationResults.phaseDetails.rough.equipment).toLocaleString()}\n\n`;
                }
                
                if (calculationResults.phaseDetails.final && phases.final) {
                    content += `Phase 2 - Final Clean:\n`;
                    content += `  Hours: ${calculationResults.phaseDetails.final.hours}\n`;
                    content += `  Days: ${calculationResults.phaseDetails.final.days}\n`;
                    content += `  Labor: $${Math.round(calculationResults.phaseDetails.final.labor).toLocaleString()}\n`;
                    content += `  Equipment: $${Math.round(calculationResults.phaseDetails.final.equipment).toLocaleString()}\n\n`;
                }
                
                if (calculationResults.phaseDetails.touchup && phases.touchup) {
                    content += `Phase 3 - Touch-Up:\n`;
                    content += `  Hours: ${calculationResults.phaseDetails.touchup.hours}\n`;
                    content += `  Days: ${calculationResults.phaseDetails.touchup.days}\n`;
                    content += `  Labor: $${Math.round(calculationResults.phaseDetails.touchup.labor).toLocaleString()}\n`;
                    content += `  Equipment: $${Math.round(calculationResults.phaseDetails.touchup.equipment).toLocaleString()}\n\n`;
                }
            }
            
            content += 'MARKET ADJUSTMENTS\n';
            content += '-'.repeat(30) + '\n';
            content += `Regional Market: ${document.getElementById('region').selectedOptions[0].text}\n`;
            content += `Competition Level: ${document.getElementById('competitionLevel').selectedOptions[0].text}\n`;
            content += `Service Schedule: ${document.getElementById('timeOfService').selectedOptions[0].text}\n`;
            
            // Download as text file
            const blob = new Blob([content], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'fsm-job-summary.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
